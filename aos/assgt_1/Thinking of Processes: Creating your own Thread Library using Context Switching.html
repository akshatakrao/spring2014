<!DOCTYPE html>
<html class="v2 wf-vollkorn-n4-active wf-active" dir="ltr" xmlns="http://www.w3.org/1999/xhtml" xmlns:b="http://www.google.com/2005/gml/b" xmlns:data="http://www.google.com/2005/gml/data" xmlns:expr="http://www.google.com/2005/gml/expr"><head>
<meta content="IE=EmulateIE7" http-equiv="X-UA-Compatible">
<meta content="width=1100" name="viewport">
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script async="" src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/cbgapi.loaded_4"></script><script async="" src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/cbgapi.loaded_3"></script><script async="" src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/cbgapi.loaded_2"></script><script async="" src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/cbgapi.loaded_1"></script><script async="" src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/cbgapi.loaded_0"></script><script async="" type="text/javascript" src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/webfont.js"></script><script type="text/javascript">(function() { var b=window,f="chrome",g="jstiming",k="tick";(function(){function d(a){this.t={};this.tick=function(a,d,c){var e=void 0!=c?c:(new Date).getTime();this.t[a]=[e,d];if(void 0==c)try{b.console.timeStamp("CSI/"+a)}catch(h){}};this[k]("start",null,a)}var a;b.performance&&(a=b.performance.timing);var n=a?new d(a.responseStart):new d;b.jstiming={Timer:d,load:n};if(a){var c=a.navigationStart,h=a.responseStart;0<c&&h>=c&&(b[g].srt=h-c)}if(a){var e=b[g].load;0<c&&h>=c&&(e[k]("_wtsrt",void 0,c),e[k]("wtsrt_","_wtsrt",h),e[k]("tbsd_","wtsrt_"))}try{a=null,
b[f]&&b[f].csi&&(a=Math.floor(b[f].csi().pageT),e&&0<c&&(e[k]("_tbnd",void 0,b[f].csi().startE),e[k]("tbnd_","_tbnd",c))),null==a&&b.gtbExternal&&(a=b.gtbExternal.pageT()),null==a&&b.external&&(a=b.external.pageT,e&&0<c&&(e[k]("_tbnd",void 0,b.external.startE),e[k]("tbnd_","_tbnd",c))),a&&(b[g].pt=a)}catch(p){}})();b.tickAboveFold=function(d){var a=0;if(d.offsetParent){do a+=d.offsetTop;while(d=d.offsetParent)}d=a;750>=d&&b[g].load[k]("aft")};var l=!1;function m(){l||(l=!0,b[g].load[k]("firstScrollTime"))}b.addEventListener?b.addEventListener("scroll",m,!1):b.attachEvent("onscroll",m);
 })();</script>
<meta content="blogger" name="generator">
<link href="http://nitish712.blogspot.com/favicon.ico" rel="icon" type="image/x-icon">
<link href="http://nitish712.blogspot.com/2012/10/thread-library-using-context-switching.html" rel="canonical">
<link rel="alternate" type="application/atom+xml" title="Thinking of Processes - Atom" href="http://nitish712.blogspot.com/feeds/posts/default">
<link rel="alternate" type="application/rss+xml" title="Thinking of Processes - RSS" href="http://nitish712.blogspot.com/feeds/posts/default?alt=rss">
<link rel="service.post" type="application/atom+xml" title="Thinking of Processes - Atom" href="http://www.blogger.com/feeds/3430663956764748632/posts/default">

<link rel="alternate" type="application/atom+xml" title="Thinking of Processes - Atom" href="http://nitish712.blogspot.com/feeds/5071293246739300471/comments/default">
<!--[if IE]><script type="text/javascript" src="https://www.blogger.com/static/v1/jsbin/850967532-ieretrofit.js"></script>
<![endif]-->
<!--[if IE]> <script> (function() { var html5 = ("abbr,article,aside,audio,canvas,datalist,details," + "figure,footer,header,hgroup,mark,menu,meter,nav,output," + "progress,section,time,video").split(','); for (var i = 0; i < html5.length; i++) { document.createElement(html5[i]); } try { document.execCommand('BackgroundImageCache', false, true); } catch(e) {} })(); </script> <![endif]-->
<title>Thinking of Processes: Creating your own Thread Library using Context Switching</title>
<script type="text/javascript">
if (navigator.userAgent.indexOf('MSIE 6') == -1) {
  WebFontConfig = {
    google: { families: [ 'Vollkorn' ],
    api: '//themes.googleusercontent.com/fonts/css?kit=bMw4L8HgZQmedCYS2hoskA'
    },
    loading: function() {
      if (window.jstiming) window.jstiming.load.tick('webfontLoading');
    },
    active: function() {
      if (window.jstiming) window.jstiming.load.tick('webfontActive');
    }
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = '//ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })();
} else {
  document.documentElement.className = 'wf-inactive';
}
</script>
<style type="text/css">
.wf-inactive .header h1, .wf-vollkorn-n4-loading .header h1, .wf-vollkorn-n4-inactive .header h1 {
  font-family: serif;
}
</style>
<link type="text/css" rel="stylesheet" href="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/3160349130-widget_css_2_bundle.css">
<link type="text/css" rel="stylesheet" href="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/authorization.css">
<style id="page-skin-1" type="text/css"><!--
/*
-----------------------------------------------
Blogger Template Style
Name:     Simple
Designer: Josh Peterson
URL:      www.noaesthetic.com
----------------------------------------------- */
/* Variable definitions
====================
<Variable name="keycolor" description="Main Color" type="color" default="#66bbdd"/>
<Group description="Page Text" selector="body">
<Variable name="body.font" description="Font" type="font"
default="normal normal 12px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="body.text.color" description="Text Color" type="color" default="#222222"/>
</Group>
<Group description="Backgrounds" selector=".body-fauxcolumns-outer">
<Variable name="body.background.color" description="Outer Background" type="color" default="#66bbdd"/>
<Variable name="content.background.color" description="Main Background" type="color" default="#ffffff"/>
<Variable name="header.background.color" description="Header Background" type="color" default="transparent"/>
</Group>
<Group description="Links" selector=".main-outer">
<Variable name="link.color" description="Link Color" type="color" default="#2288bb"/>
<Variable name="link.visited.color" description="Visited Color" type="color" default="#888888"/>
<Variable name="link.hover.color" description="Hover Color" type="color" default="#33aaff"/>
</Group>
<Group description="Blog Title" selector=".header h1">
<Variable name="header.font" description="Font" type="font"
default="normal normal 60px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="header.text.color" description="Title Color" type="color" default="#3399bb" />
</Group>
<Group description="Blog Description" selector=".header .description">
<Variable name="description.text.color" description="Description Color" type="color"
default="#777777" />
</Group>
<Group description="Tabs Text" selector=".tabs-inner .widget li a">
<Variable name="tabs.font" description="Font" type="font"
default="normal normal 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="tabs.text.color" description="Text Color" type="color" default="#999999"/>
<Variable name="tabs.selected.text.color" description="Selected Color" type="color" default="#000000"/>
</Group>
<Group description="Tabs Background" selector=".tabs-outer .PageList">
<Variable name="tabs.background.color" description="Background Color" type="color" default="#f5f5f5"/>
<Variable name="tabs.selected.background.color" description="Selected Color" type="color" default="#eeeeee"/>
</Group>
<Group description="Post Title" selector="h3.post-title, .comments h4">
<Variable name="post.title.font" description="Font" type="font"
default="normal normal 22px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
</Group>
<Group description="Date Header" selector=".date-header">
<Variable name="date.header.color" description="Text Color" type="color"
default="#79642a"/>
<Variable name="date.header.background.color" description="Background Color" type="color"
default="transparent"/>
</Group>
<Group description="Post Footer" selector=".post-footer">
<Variable name="post.footer.text.color" description="Text Color" type="color" default="#666666"/>
<Variable name="post.footer.background.color" description="Background Color" type="color"
default="#f9f9f9"/>
<Variable name="post.footer.border.color" description="Shadow Color" type="color" default="#eeeeee"/>
</Group>
<Group description="Gadgets" selector="h2">
<Variable name="widget.title.font" description="Title Font" type="font"
default="normal bold 11px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="widget.title.text.color" description="Title Color" type="color" default="#000000"/>
<Variable name="widget.alternate.text.color" description="Alternate Color" type="color" default="#999999"/>
</Group>
<Group description="Images" selector=".main-inner">
<Variable name="image.background.color" description="Background Color" type="color" default="#ffffff"/>
<Variable name="image.border.color" description="Border Color" type="color" default="#eeeeee"/>
<Variable name="image.text.color" description="Caption Text Color" type="color" default="#79642a"/>
</Group>
<Group description="Accents" selector=".content-inner">
<Variable name="body.rule.color" description="Separator Line Color" type="color" default="#eeeeee"/>
<Variable name="tabs.border.color" description="Tabs Border Color" type="color" default="#8e3e3e"/>
</Group>
<Variable name="body.background" description="Body Background" type="background"
color="#513831" default="$(color) none repeat scroll top left"/>
<Variable name="body.background.override" description="Body Background Override" type="string" default=""/>
<Variable name="body.background.gradient.cap" description="Body Gradient Cap" type="url"
default="url(//www.blogblog.com/1kt/simple/gradients_light.png)"/>
<Variable name="body.background.gradient.tile" description="Body Gradient Tile" type="url"
default="url(//www.blogblog.com/1kt/simple/body_gradient_tile_light.png)"/>
<Variable name="content.background.color.selector" description="Content Background Color Selector" type="string" default=".content-inner"/>
<Variable name="content.padding" description="Content Padding" type="length" default="10px"/>
<Variable name="content.padding.horizontal" description="Content Horizontal Padding" type="length" default="10px"/>
<Variable name="content.shadow.spread" description="Content Shadow Spread" type="length" default="40px"/>
<Variable name="content.shadow.spread.webkit" description="Content Shadow Spread (WebKit)" type="length" default="5px"/>
<Variable name="content.shadow.spread.ie" description="Content Shadow Spread (IE)" type="length" default="10px"/>
<Variable name="main.border.width" description="Main Border Width" type="length" default="0"/>
<Variable name="header.background.gradient" description="Header Gradient" type="url" default="none"/>
<Variable name="header.shadow.offset.left" description="Header Shadow Offset Left" type="length" default="-1px"/>
<Variable name="header.shadow.offset.top" description="Header Shadow Offset Top" type="length" default="-1px"/>
<Variable name="header.shadow.spread" description="Header Shadow Spread" type="length" default="1px"/>
<Variable name="header.padding" description="Header Padding" type="length" default="30px"/>
<Variable name="header.border.size" description="Header Border Size" type="length" default="1px"/>
<Variable name="header.bottom.border.size" description="Header Bottom Border Size" type="length" default="0"/>
<Variable name="header.border.horizontalsize" description="Header Horizontal Border Size" type="length" default="0"/>
<Variable name="description.text.size" description="Description Text Size" type="string" default="140%"/>
<Variable name="tabs.margin.top" description="Tabs Margin Top" type="length" default="0" />
<Variable name="tabs.margin.side" description="Tabs Side Margin" type="length" default="30px" />
<Variable name="tabs.background.gradient" description="Tabs Background Gradient" type="url"
default="url(//www.blogblog.com/1kt/simple/gradients_light.png)"/>
<Variable name="tabs.border.width" description="Tabs Border Width" type="length" default="1px"/>
<Variable name="tabs.bevel.border.width" description="Tabs Bevel Border Width" type="length" default="1px"/>
<Variable name="date.header.padding" description="Date Header Padding" type="string" default="inherit"/>
<Variable name="date.header.letterspacing" description="Date Header Letter Spacing" type="string" default="inherit"/>
<Variable name="date.header.margin" description="Date Header Margin" type="string" default="inherit"/>
<Variable name="post.margin.bottom" description="Post Bottom Margin" type="length" default="25px"/>
<Variable name="image.border.small.size" description="Image Border Small Size" type="length" default="2px"/>
<Variable name="image.border.large.size" description="Image Border Large Size" type="length" default="5px"/>
<Variable name="page.width.selector" description="Page Width Selector" type="string" default=".region-inner"/>
<Variable name="page.width" description="Page Width" type="string" default="auto"/>
<Variable name="main.section.margin" description="Main Section Margin" type="length" default="15px"/>
<Variable name="main.padding" description="Main Padding" type="length" default="15px"/>
<Variable name="main.padding.top" description="Main Padding Top" type="length" default="30px"/>
<Variable name="main.padding.bottom" description="Main Padding Bottom" type="length" default="30px"/>
<Variable name="paging.background"
color="#fff9ee"
description="Background of blog paging area" type="background"
default="transparent none no-repeat scroll top center"/>
<Variable name="footer.bevel" description="Bevel border length of footer" type="length" default="0"/>
<Variable name="mobile.background.overlay" description="Mobile Background Overlay" type="string"
default="transparent none repeat scroll top left"/>
<Variable name="mobile.background.size" description="Mobile Background Size" type="string" default="auto"/>
<Variable name="mobile.button.color" description="Mobile Button Color" type="color" default="#ffffff" />
<Variable name="startSide" description="Side where text starts in blog language" type="automatic" default="left"/>
<Variable name="endSide" description="Side where text ends in blog language" type="automatic" default="right"/>
*/
/* Content
----------------------------------------------- */
body, .body-fauxcolumn-outer {
font: normal normal 14px Georgia, Utopia, 'Palatino Linotype', Palatino, serif;
color: #79642a;
background: #513831 url(//themes.googleusercontent.com/image?id=1KH22PlFqsiVYxboQNAoJjYmRbw5M4REHmdJbHT5M2x9zVMGrCqwSjZvaQW_A10KPc6Il) repeat scroll top center /* Credit: luoman (http://www.istockphoto.com/googleimages.php?id=11394138&amp;platform=blogger) */;
padding: 0 40px 40px 40px;
}
html body .region-inner {
min-width: 0;
max-width: 100%;
width: auto;
}
a:link {
text-decoration:none;
color: #993200;
}
a:visited {
text-decoration:none;
color: #888888;
}
a:hover {
text-decoration:underline;
color: #ff1800;
}
.body-fauxcolumn-outer .fauxcolumn-inner {
background: transparent none repeat scroll top left;
_background-image: none;
}
.body-fauxcolumn-outer .cap-top {
position: absolute;
z-index: 1;
height: 400px;
width: 100%;
background: #513831 url(//themes.googleusercontent.com/image?id=1KH22PlFqsiVYxboQNAoJjYmRbw5M4REHmdJbHT5M2x9zVMGrCqwSjZvaQW_A10KPc6Il) repeat scroll top center /* Credit: luoman (http://www.istockphoto.com/googleimages.php?id=11394138&amp;platform=blogger) */;
}
.body-fauxcolumn-outer .cap-top .cap-left {
width: 100%;
background: transparent none repeat-x scroll top left;
_background-image: none;
}
.content-outer {
-moz-box-shadow: 0 0 40px rgba(0, 0, 0, .15);
-webkit-box-shadow: 0 0 5px rgba(0, 0, 0, .15);
-goog-ms-box-shadow: 0 0 10px #333333;
box-shadow: 0 0 40px rgba(0, 0, 0, .15);
margin-bottom: 1px;
}
.content-inner {
padding: 10px 10px;
border-radius: 10px;
}
.content-inner {
background-color: #fff9ee;
}
/* Header
----------------------------------------------- */
.header-outer {
background: #ccb666 url(//www.blogblog.com/1kt/simple/gradients_light.png) repeat-x scroll 0 -400px;
_background-image: none;
border-radius: 10px;
}
.Header h1 {
font: normal normal 48px Vollkorn;
color: #cef8be;
text-shadow: 1px 2px 3px rgba(0, 0, 0, .2);
}
.Header h1 a {
color: #cef8be;
}
.Header .description {
font-size: 140%;
color: #ffffff;
}
.header-inner .Header .titlewrapper {
padding: 22px 30px;
}
.header-inner .Header .descriptionwrapper {
padding: 0 30px;
}
/* Tabs
----------------------------------------------- */
.tabs-inner .section:first-child {
border-top: 0 solid #ffffff;
}
.tabs-inner .section:first-child ul {
margin-top: -0;
border-top: 0 solid #ffffff;
border-left: 0 solid #ffffff;
border-right: 0 solid #ffffff;
}
.tabs-inner .widget ul {
background: #fff9ee none repeat-x scroll 0 -800px;
_background-image: none;
border-bottom: 1px solid #ffffff;
margin-top: 0;
margin-left: -30px;
margin-right: -30px;
}
.tabs-inner .widget li a {
display: inline-block;
padding: .6em 1em;
font: normal normal 16px Georgia, Utopia, 'Palatino Linotype', Palatino, serif;
color: #998877;
border-left: 1px solid #fff9ee;
border-right: 1px solid #ffffff;
}
.tabs-inner .widget li:first-child a {
border-left: none;
}
.tabs-inner .widget li.selected a, .tabs-inner .widget li a:hover {
color: #000000;
background-color: #fff9ee;
text-decoration: none;
}
/* Columns
----------------------------------------------- */
.main-outer {
border-top: 0 solid #8e3e3e;
}
.fauxcolumn-left-outer .fauxcolumn-inner {
border-right: 1px solid #8e3e3e;
}
.fauxcolumn-right-outer .fauxcolumn-inner {
border-left: 1px solid #8e3e3e;
}
/* Headings
----------------------------------------------- */
h2 {
margin: 0 0 1em 0;
font: normal bold 12px Georgia, Utopia, 'Palatino Linotype', Palatino, serif;
color: #429ff2;
text-transform: uppercase;
}
/* Widgets
----------------------------------------------- */
.widget .zippy {
color: #a33636;
text-shadow: 2px 2px 1px rgba(0, 0, 0, .1);
}
.widget .popular-posts ul {
list-style: none;
}
/* Posts
----------------------------------------------- */
.date-header span {
background-color: #f8e9be;
color: #c75656;
padding: inherit;
letter-spacing: inherit;
margin: inherit;
}
.main-inner {
padding-top: 30px;
padding-bottom: 30px;
}
.main-inner .column-center-inner {
padding: 0 15px;
}
.main-inner .column-center-inner .section {
margin: 0 15px;
}
.post {
margin: 0 0 25px 0;
}
h3.post-title, .comments h4 {
font: normal normal 24px Georgia, Utopia, 'Palatino Linotype', Palatino, serif;
margin: .75em 0 0;
}
.post-body {
font-size: 110%;
line-height: 1.4;
position: relative;
}
.post-body img, .post-body .tr-caption-container, .Profile img, .Image img,
.BlogList .item-thumbnail img {
padding: 2px;
background: #ffffff;
border: 1px solid #eeeeee;
-moz-box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
-webkit-box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
}
.post-body img, .post-body .tr-caption-container {
padding: 5px;
}
.post-body .tr-caption-container {
color: #79642a;
}
.post-body .tr-caption-container img {
padding: 0;
background: transparent;
border: none;
-moz-box-shadow: 0 0 0 rgba(0, 0, 0, .1);
-webkit-box-shadow: 0 0 0 rgba(0, 0, 0, .1);
box-shadow: 0 0 0 rgba(0, 0, 0, .1);
}
.post-header {
margin: 0 0 1.5em;
line-height: 1.6;
font-size: 90%;
}
.post-footer {
margin: 20px -2px 0;
padding: 5px 10px;
color: #666555;
background-color: #eee9dd;
border-bottom: 1px solid #eeeeee;
line-height: 1.6;
font-size: 90%;
}
#comments .comment-author {
padding-top: 1.5em;
border-top: 1px solid #8e3e3e;
background-position: 0 1.5em;
}
#comments .comment-author:first-child {
padding-top: 0;
border-top: none;
}
.avatar-image-container {
margin: .2em 0 0;
}
#comments .avatar-image-container img {
border: 1px solid #eeeeee;
}
/* Comments
----------------------------------------------- */
.comments .comments-content .icon.blog-author {
background-repeat: no-repeat;
background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEgAACxIB0t1+/AAAAAd0SU1FB9sLFwMeCjjhcOMAAAD+SURBVDjLtZSvTgNBEIe/WRRnm3U8RC1neQdsm1zSBIU9VVF1FkUguQQsD9ITmD7ECZIJSE4OZo9stoVjC/zc7ky+zH9hXwVwDpTAWWLrgS3QAe8AZgaAJI5zYAmc8r0G4AHYHQKVwII8PZrZFsBFkeRCABYiMh9BRUhnSkPTNCtVXYXURi1FpBDgArj8QU1eVXUzfnjv7yP7kwu1mYrkWlU33vs1QNu2qU8pwN0UpKoqokjWwCztrMuBhEhmh8bD5UDqur75asbcX0BGUB9/HAMB+r32hznJgXy2v0sGLBcyAJ1EK3LFcbo1s91JeLwAbwGYu7TP/3ZGfnXYPgAVNngtqatUNgAAAABJRU5ErkJggg==);
}
.comments .comments-content .loadmore a {
border-top: 1px solid #a33636;
border-bottom: 1px solid #a33636;
}
.comments .comment-thread.inline-thread {
background-color: #eee9dd;
}
.comments .continue {
border-top: 2px solid #a33636;
}
/* Accents
---------------------------------------------- */
.section-columns td.columns-cell {
border-left: 1px solid #8e3e3e;
}
.blog-pager {
background: transparent none no-repeat scroll top center;
}
.blog-pager-older-link, .home-link,
.blog-pager-newer-link {
background-color: #fff9ee;
padding: 5px;
}
.footer-outer {
border-top: 0 dashed #bbbbbb;
}
/* Mobile
----------------------------------------------- */
body.mobile  {
background-size: auto;
}
.mobile .body-fauxcolumn-outer {
background: transparent none repeat scroll top left;
}
.mobile .body-fauxcolumn-outer .cap-top {
background-size: 100% auto;
}
.mobile .content-outer {
-webkit-box-shadow: 0 0 3px rgba(0, 0, 0, .15);
box-shadow: 0 0 3px rgba(0, 0, 0, .15);
padding: 0 40px;
}
body.mobile .AdSense {
margin: 0 -40px;
}
.mobile .tabs-inner .widget ul {
margin-left: 0;
margin-right: 0;
}
.mobile .post {
margin: 0;
}
.mobile .main-inner .column-center-inner .section {
margin: 0;
}
.mobile .date-header span {
padding: 0.1em 10px;
margin: 0 -10px;
}
.mobile h3.post-title {
margin: 0;
}
.mobile .blog-pager {
background: transparent none no-repeat scroll top center;
}
.mobile .footer-outer {
border-top: none;
}
.mobile .main-inner, .mobile .footer-inner {
background-color: #fff9ee;
}
.mobile-index-contents {
color: #79642a;
}
.mobile-link-button {
background-color: #993200;
}
.mobile-link-button a:link, .mobile-link-button a:visited {
color: #ffffff;
}
.mobile .tabs-inner .section:first-child {
border-top: none;
}
.mobile .tabs-inner .PageList .widget-content {
background-color: #fff9ee;
color: #000000;
border-top: 1px solid #ffffff;
border-bottom: 1px solid #ffffff;
}
.mobile .tabs-inner .PageList .widget-content .pagelist-arrow {
border-left: 1px solid #ffffff;
}
.label-size-1 {
font-size:100%;
opacity:1.0
}
.label-size-2 {
font-size:110%;
opacity:1.0
}
.label-size-3 {
font-size:120%;
}
.label-size-4 {
font-size:140%;
}
.label-size-5 {
font-size:180%;
opacity:1.0;
}
/* General features in the tag cloud */
.cloud-label-widget-content {
text-align:justify;
background-color:#E8E8E8 ;
border:1px dotted #993200;
border-radius:8px;
padding:10px 20px 20px 10px;
}
.syntaxhighlighter table td.gutter .line {
text-align: right !important;
padding: 0 5px  !important;
}
--></style>
<style id="template-skin-1" type="text/css"><!--
body {
min-width: 970px;
}
.content-outer, .content-fauxcolumn-outer, .region-inner {
min-width: 970px;
max-width: 970px;
_width: 970px;
}
.main-inner .columns {
padding-left: 0px;
padding-right: 220px;
}
.main-inner .fauxcolumn-center-outer {
left: 0px;
right: 220px;
/* IE6 does not respect left and right together */
_width: expression(this.parentNode.offsetWidth -
parseInt("0px") -
parseInt("220px") + 'px');
}
.main-inner .fauxcolumn-left-outer {
width: 0px;
}
.main-inner .fauxcolumn-right-outer {
width: 220px;
}
.main-inner .column-left-outer {
width: 0px;
right: 100%;
margin-left: -0px;
}
.main-inner .column-right-outer {
width: 220px;
margin-right: -220px;
}
#layout {
min-width: 0;
}
#layout .content-outer {
min-width: 0;
width: 800px;
}
#layout .region-inner {
min-width: 0;
width: auto;
}
--></style>
<!--SYNTAX HIGHLIGHTER BEGINS-->
<link href="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/shCore.css" rel="stylesheet" type="text/css">
<link href="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/shThemeEclipse.css" rel="stylesheet" type="text/css"><link href="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/css.css" rel="stylesheet"><script src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/shCore.js" type="text/javascript"></script>
<script src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/shBrushCpp.js" type="text/javascript"></script>
<script src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/shBrushCSharp.js" type="text/javascript"></script>
<script src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/shBrushCss.js" type="text/javascript"></script>
<script src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/shBrushJava.js" type="text/javascript"></script>
<script src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/shBrushJScript.js" type="text/javascript"></script>
<script src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/shBrushPhp.js" type="text/javascript"></script>
<script src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/shBrushPython.js" type="text/javascript"></script>
<script src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/shBrushRuby.js" type="text/javascript"></script>
<script src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/shBrushSql.js" type="text/javascript"></script>
<script src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/shBrushVb.js" type="text/javascript"></script>
<script src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/shBrushXml.js" type="text/javascript"></script>
<script src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/shBrushPerl.js" type="text/javascript"></script>
<script language="javascript">
SyntaxHighlighter.config.bloggerMode = true;
SyntaxHighlighter.config.clipboardSwf = 'http://alexgorbatchev.com/pub/sh/current/scripts/clipboard.swf';
SyntaxHighlighter.all();
</script>
<!--SYNTAX HIGHLIGHTER ENDS-->
<script type="text/javascript">var a="indexOf",b="&m=1",e="(^|&)m=",f="?",g="?m=1";function h(){var c=window.location.href,d=c.split(f);switch(d.length){case 1:return c+g;case 2:return 0<=d[1].search(e)?null:c+b;default:return null}}var k=navigator.userAgent;if(-1!=k[a]("Mobile")&&-1!=k[a]("WebKit")&&-1==k[a]("iPad")||-1!=k[a]("Opera Mini")||-1!=k[a]("IEMobile")){var l=h();l&&window.location.replace(l)};
</script><script type="text/javascript">
if (window.jstiming) window.jstiming.load.tick('headEnd');
</script><script src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/google_top_exp.js" type="text/javascript"></script><style>.gc-bubbleDefault{background-color:transparent !important;text-align:left;padding:0 !important;margin:0 !important;border:0 !important;table-layout:auto !important}.gc-reset{background-color:transparent !important;border:0 !important;padding:0 !important;margin:0 !important;text-align:left}.pls-bubbleTop{border-bottom:1px solid #ccc !important}.pls-topTail,.pls-vertShimLeft,.pls-contentLeft{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/border_3.gif) !important}.pls-topTail{background-repeat:repeat-x !important;background-position:bottom !important}.pls-vertShim{background-color:#fff !important;text-align:right}.tbl-grey .pls-vertShim{background-color:#f5f5f5 !important}.pls-vertShimLeft{background-repeat:repeat-y !important;background-position:right !important;height:4px}.pls-vertShimRight{height:4px}.pls-confirm-container .pls-vertShim{background-color:#fff3c2 !important}.pls-contentWrap{background-color:#fff !important;position:relative !important;vertical-align:top}.pls-contentLeft{background-repeat:repeat-y;background-position:right;vertical-align:top}.pls-dropRight{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/bubbleDropR_3.png) !important;background-repeat:repeat-y !important;vertical-align:top}.pls-vert,.pls-tailleft,.pls-dropTR .pls-dropBR,.pls-dropBL,.pls-vert img{vertical-align:top}.pls-dropBottom{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/bubbleDropB_3.png) !important;background-repeat:repeat-x !important;width:100%;vertical-align:top}.pls-topLeft{background:inherit !important;text-align:right;vertical-align:bottom}.pls-topRight{background:inherit !important;text-align:left;vertical-align:bottom}.pls-bottomLeft{background:inherit !important;text-align:right}.pls-bottomRight{background:inherit !important;text-align:left;vertical-align:top}.pls-tailtop,.pls-tailright,.pls-tailbottom,.pls-tailleft{display:none;position:relative}.pls-tailbottom,.pls-tailtop,.pls-tailright,.pls-tailleft,.pls-dropTR,.pls-dropBR,.pls-dropBL{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/bubbleSprite_3.png) !important;background-repeat:no-repeat}.tbl-grey .pls-tailbottom,.tbl-grey .pls-tailtop,.tbl-grey .pls-tailright,.tbl-grey .pls-tailleft,.tbl-grey .pls-dropTR,.tbl-grey .pls-dropBR,.tbl-grey .pls-dropBL{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/bubbleSprite-grey.png) !important}.pls-tailbottom{background-position:-23px 0}.pls-confirm-container .pls-tailbottom{background-position:-23px -10px}.pls-tailtop{background-position:-19px -20px}.pls-tailright{background-position:0 0}.pls-tailleft{background-position:-10px 0}.pls-tailtop{vertical-align:top}.gc-bubbleDefault td{line-height:0;font-size:0}.pls-topLeft img,.pls-topRight img,.pls-tailbottom{vertical-align:bottom}.pls-bottomLeft img,.bubbleDropTR,.pls-dropBottomL img,.pls-dropBottom img,.pls-dropBottomR img,.pls-bottomLeft{vertical-align:top}.pls-dropTR{background-position:0 -22px}.pls-dropBR{background-position:0 -27px}.pls-dropBL{background-position:0 -16px}.pls-spacertop,.pls-spacerright,.pls-spacerbottom,.pls-spacerleft{position:static !important}.pls-spinner{bottom:0;position:absolute;left:0;margin:auto;right:0;top:0}</style></head>
<body class="">
<div class="navbar section" id="navbar"><div class="widget Navbar" id="Navbar1"><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"><iframe src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/navbar.html" name="navbar-iframe" id="navbar-iframe" vspace="0" tabindex="0" style="" marginwidth="0" marginheight="0" hspace="0" frameborder="0" scrolling="no" width="100%"></iframe></div>
<script gapi_processed="true" type="text/javascript" src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/plusone.js"></script>
<script type="text/javascript">
        gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
          if (gapi.iframes && gapi.iframes.getContext) {
            gapi.iframes.getContext().openChild({
                url: 'https://www.blogger.com/navbar.g?targetBlogID\0753430663956764748632\46blogName\75Thinking+of+Processes\46publishMode\75PUBLISH_MODE_BLOGSPOT\46navbarType\75LIGHT\46layoutType\75LAYOUTS\46searchRoot\75http://nitish712.blogspot.com/search\46blogLocale\75en_GB\46v\0752\46homepageUrl\75http://nitish712.blogspot.com/\46targetPostID\0755071293246739300471\46blogPostOrPageUrl\75http://nitish712.blogspot.com/2012/10/thread-library-using-context-switching.html\46blogFollowUrl\75https://plus.google.com/109788692632472947635\46vt\0754537505376082374697',
                where: document.getElementById("navbar-iframe-container"),
                id: "navbar-iframe"
            });
          }
        });
      </script><script type="text/javascript">
(function() {
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = '//pagead2.googlesyndication.com/pagead/js/google_top_exp.js';
var head = document.getElementsByTagName('head')[0];
if (head) {
head.appendChild(script);
}})();
</script>
</div></div><iframe src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/blank.html" style="height: 0px; width: 0px; position: absolute;" name="google_top_static_frame" id="google_top_static_frame" frameborder="0"></iframe>
<div class="body-fauxcolumns">
<div class="fauxcolumn-outer body-fauxcolumn-outer">
<div class="cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left">
<div class="fauxborder-right"></div>
<div class="fauxcolumn-inner">
</div>
</div>
<div class="cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
</div>
<div class="content">
<div class="content-fauxcolumns">
<div class="fauxcolumn-outer content-fauxcolumn-outer">
<div class="cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left">
<div class="fauxborder-right"></div>
<div class="fauxcolumn-inner">
</div>
</div>
<div class="cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
</div>
<div class="content-outer">
<div class="content-cap-top cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left content-fauxborder-left">
<div class="fauxborder-right content-fauxborder-right"></div>
<div class="content-inner">
<header>
<div class="header-outer">
<div class="header-cap-top cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left header-fauxborder-left">
<div class="fauxborder-right header-fauxborder-right"></div>
<div class="region-inner header-inner">
<div class="header section" id="header"><div class="widget Header" id="Header1">
<div id="header-inner">
<div class="titlewrapper">
<h1 class="title">
<a href="http://nitish712.blogspot.com/">Thinking of Processes</a>
</h1>
</div>
<div class="descriptionwrapper">
<p class="description"><span>This blog gives you a complete idea about processes and stuff. Start from <a href="http://www.nitish712.blogspot.in/2012/08/threads-and-processes.html">here</a>.
<br>
</span></p><p>
Find me on:<a href="http://www.spoj.com/ranks/users/111344/">Spoj</a>,
<a href="http://www.codechef.com/users/nitish712">Codechef</a>
<a href="http://codeforces.com/profile/nitish712">Codeforces</a>
<a href="http://stackoverflow.com/users/1240384/nitish712">Stack Overflow</a></p><p></p>
</div>
</div>
</div></div>
</div>
</div>
<div class="header-cap-bottom cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
</header>
<div class="tabs-outer">
<div class="tabs-cap-top cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left tabs-fauxborder-left">
<div class="fauxborder-right tabs-fauxborder-right"></div>
<div class="region-inner tabs-inner">
<div class="tabs section" id="crosscol"><div class="widget Label" id="Label1">
<h2>Labels</h2>
<div class="widget-content cloud-label-widget-content">
<span class="label-size label-size-1">
<a dir="ltr" href="http://nitish712.blogspot.com/search/label/booting">booting</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://nitish712.blogspot.com/search/label/cond.%20variable">cond. variable</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-4">
<a dir="ltr" href="http://nitish712.blogspot.com/search/label/fork">fork</a>
<span class="label-count" dir="ltr">(2)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://nitish712.blogspot.com/search/label/IPC%20problems">IPC problems</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://nitish712.blogspot.com/search/label/itimer">itimer</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://nitish712.blogspot.com/search/label/Msg%20Queues">Msg Queues</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-4">
<a dir="ltr" href="http://nitish712.blogspot.com/search/label/mutex">mutex</a>
<span class="label-count" dir="ltr">(2)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://nitish712.blogspot.com/search/label/process%20types">process types</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://nitish712.blogspot.com/search/label/ps">ps</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-4">
<a dir="ltr" href="http://nitish712.blogspot.com/search/label/pthread%20library">pthread library</a>
<span class="label-count" dir="ltr">(2)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://nitish712.blogspot.com/search/label/sched.%20algos">sched. algos</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://nitish712.blogspot.com/search/label/semaphores">semaphores</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://nitish712.blogspot.com/search/label/shrd%20memory">shrd memory</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://nitish712.blogspot.com/search/label/sigaction">sigaction</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://nitish712.blogspot.com/search/label/sigprocmask">sigprocmask</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://nitish712.blogspot.com/search/label/system%20calls">system calls</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-5">
<a dir="ltr" href="http://nitish712.blogspot.com/search/label/System%20V%20IPC">System V IPC</a>
<span class="label-count" dir="ltr">(3)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://nitish712.blogspot.com/search/label/thlib%20code">thlib code</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://nitish712.blogspot.com/search/label/ucontext_t">ucontext_t</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-4">
<a dir="ltr" href="http://nitish712.blogspot.com/search/label/vfork">vfork</a>
<span class="label-count" dir="ltr">(2)</span>
</span>
<span class="label-size label-size-4">
<a dir="ltr" href="http://nitish712.blogspot.com/search/label/virtual%20memory">virtual memory</a>
<span class="label-count" dir="ltr">(2)</span>
</span>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=3430663956764748632&amp;widgetType=Label&amp;widgetId=Label1&amp;action=editWidget&amp;sectionId=crosscol" onclick='return _WidgetManager._PopupConfig(document.getElementById("Label1"));' target="configLabel1" title="Edit">
<img alt="" src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/icon18_wrench_allbkg.png" height="18" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div>
</div></div>
<div class="tabs section" id="crosscol-overflow"></div>
</div>
</div>
<div class="tabs-cap-bottom cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
<div class="main-outer">
<div class="main-cap-top cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left main-fauxborder-left">
<div class="fauxborder-right main-fauxborder-right"></div>
<div class="region-inner main-inner">
<div class="columns fauxcolumns">
<div class="fauxcolumn-outer fauxcolumn-center-outer">
<div class="cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left">
<div class="fauxborder-right"></div>
<div class="fauxcolumn-inner">
</div>
</div>
<div class="cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
<div class="fauxcolumn-outer fauxcolumn-left-outer">
<div class="cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left">
<div class="fauxborder-right"></div>
<div class="fauxcolumn-inner">
</div>
</div>
<div class="cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
<div class="fauxcolumn-outer fauxcolumn-right-outer">
<div class="cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left">
<div class="fauxborder-right"></div>
<div class="fauxcolumn-inner">
</div>
</div>
<div class="cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
<!-- corrects IE6 width calculation -->
<div class="columns-inner">
<div class="column-center-outer">
<div class="column-center-inner">
<div class="main section" id="main"><div class="widget Blog" id="Blog1">
<div class="blog-posts hfeed">
<!-- google_ad_section_start(name=default) -->

          <div class="date-outer">
        
<h2 class="date-header"><span>Tuesday, 2 October 2012</span></h2>

          <div class="date-posts">
        
<div class="post-outer">
<div class="post hentry" itemscope="itemscope" itemtype="http://schema.org/BlogPosting">
<a name="5071293246739300471"></a>
<h3 class="post-title entry-title" itemprop="name">
Creating your own Thread Library using <i><u>Context Switching</u></i>
</h3>
<div class="post-header">
<div class="post-header-line-1"></div>
</div>
<div class="post-body entry-content" id="post-body-5071293246739300471" itemprop="description articleBody">
<div dir="ltr" style="text-align: left;" trbidi="on">
<style>
    .syntaxhighlighter table td.gutter .line {
        padding: 0 !important;
    }
</style>
<p>
As we have known a lot about the <u>pthread library</u> and System V IPC <u>Semaphores</u>, let us try to create our own thread library. This can be accomplished in mainly three ways, and you can learn it from <a href="http://www.evanjones.ca/software/threading.html">here</a>.  
</p>
<p>
Out of the three methods, I use <i><u>Context Switching</u></i>, because
 it mainly gives the control over the scheduling the threads. We require
 to explore several new functions to create a thread Library. One more 
thing is that I prefer to use <a href="http://en.wikipedia.org/wiki/Round-robin_scheduling"><i>Round-Robin Scheduling</i>
</a>
 algorithm to schedule the threads. I prefer to call our threads as <b>Tasks</b> (of course, this is not the name which I discovered, but its from <b>ADA</b> <code>:P</code>)rather than the former one. 
</p>
<h2>Getting Started:</h2>
<p>
So, let us start from scratch. Basically, we allow the user to create as
 many number of tasks as he wants, and we then try to schedule these 
tasks.
</p>
<p>
When we look from the system point of view, we run a single program, in 
which we change the context for every fixed amount of time interval. The
 kernel sees it as a single thread of execution. All the necessary 
scheduling has to be done by us.  
</p>
<p>
You may wonder whats with this context switching? Let me explain, every 
process on your system has a context, which includes all the necessary 
entities used for running a process.These include the process stack, 
Program counter, signal mask and so on.
</p>
<p>
 The <u><b>process stack</b></u> refers to the stack used by the process
 during its execution, like when the process calls another function all 
the contents of the calling function are pushed on to this stack. This 
is especially pretty much useful in case of recursive functions. But 
don't try to find 1000<sup>th</sup> fibonacci number using a recursive 
function. Because this involves large number of recursive calls which 
makes the process run out of the stack memory and the program terminates
 abnormally.
</p>   
<p>
The <u><b>program counter</b></u> as you know, stores the address of the
 next instruction to be executed. This is useful to resume the process 
in case it was either sleeping or waiting for I/O to occur. We don't 
explicitly initialize the value, because the system will automatically 
does that.
</p>
<p>
Every process has a <u><b>signal mask</b></u> with it. It is used to store the information about those signals it will block. More about this, we will see sooner.
</p>
<h2>Datatype for Process context:</h2>   
<p>
In C, we have the datatype <b>ucontext_t</b>, for controlling the process context and it is actually a struct defined in the header file <b>ucontext.h</b>. The struct is defined as follows:
</p>
<p>
</p><div><div id="highlighter_497439" class="syntaxhighlighter  c"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="c keyword bold">struct</code> <code class="c plain">ucontext_t</code></div><div class="line number2 index1 alt1"><code class="c plain">{</code></div><div class="line number3 index2 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">ucontext_t *uc_link;</code></div><div class="line number4 index3 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">sigset_t uc_sigmask;&nbsp;&nbsp;&nbsp; </code></div><div class="line number5 index4 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">stack_t uc_stack;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number6 index5 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">mcontext_t uc_mcontext;</code></div><div class="line number7 index6 alt2"><code class="c plain">};</code></div></div></td></tr></tbody></table></div></div>
<p></p>
<p>
Although, you may get confused for now about the description of these 
datatypes, you will get a clear picture when we look at a sample program
</p>
<p>
The first one <u>*uc_link</u> is a pointer to another context. When the 
function associated with the current context completes its execution, 
the control transfers to the context pointed to by uc_link pointer. If 
you want nothing to happen after the completion of current context, then
 simply keep it as NULL.
</p>
<p>
The second one as I said previously is the signal mask associated with 
the context. You will come to know more about the datatype <u>sigset_t</u> sooner.
</p>
<p>
The <u>stack_t</u> is another struct which is defined as follows:
</p>
<p>
</p><div><div id="highlighter_8021" class="syntaxhighlighter  c"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="c keyword bold">typedef</code> <code class="c keyword bold">struct</code> <code class="c plain">{</code></div><div class="line number2 index1 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c keyword bold">void</code>&nbsp; <code class="c plain">*ss_sp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number3 index2 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c color1 bold">int</code>&nbsp;&nbsp;&nbsp; <code class="c plain">ss_flags;&nbsp; </code></div><div class="line number4 index3 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c color1 bold">size_t</code> <code class="c plain">ss_size;&nbsp;&nbsp; </code></div><div class="line number5 index4 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">} stack_t;</code></div></div></td></tr></tbody></table></div></div>
<p></p>
<p>
The first of these is a generic void pointer <u>ss_sp</u>, which points to the stack memory. We dynamically allocate some finite amount of memory for this pointer. 
</p>
<p>
The second one <u>ss_flags</u>, is the flags associated with the stack, which is out of bounds in our discussion and so we simply initialize it to zero.
</p>
<p>
The third one is an integer type that stores the amount of memory that 
you allocated previously to the void pointer. Both values should match 
else your program may go wrong.
</p>
<p>Coming back to our <u>ucontext_t</u>, the last datatype is the one 
which stores the registers values in it. We should be least concerned 
about it, because it is generally used by the system.
</p>
<hr>
<p>
Now that we have learnt about the <u>ucontext_t</u> datatype, let us examine the basic functions used on this datatype. They are as follows:
</p>
<p>
</p><div><div id="highlighter_858136" class="syntaxhighlighter  c"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="c color1 bold">int</code> <code class="c plain">getcontext(ucontext_t *ucp);</code></div></div></td></tr></tbody></table></div></div>
<p></p>
<p>
This function gets the context of the currently executing context. In 
other words, it takes a pointer to ucontext_t and stores all the 
register values, instruction pointer value which are there when this 
call is executed. 
This is either used while initializing a context or to explicitly get 
the context. It returns 0 on success and -1 on failure.
</p>
<p> 
</p><div><div id="highlighter_909166" class="syntaxhighlighter  c"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="c color1 bold">int</code> <code class="c plain">setcontext(</code><code class="c keyword bold">const</code> <code class="c plain">ucontext_t *ucp);</code></div></div></td></tr></tbody></table></div></div>
<p></p>
<p>
This is used to set the context of the calling process to the context pointed to by <i>ucp</i>. In other words, the control transfers to the state pointed to by <i>ucp</i> which was previously initialized by getcontext.
</p>
<p>
Let us take some analogy to avoid confusion. Suppose that you are 
watching a movie and there is an awesome action scene at say 22 minutes 
and 0 seconds from the beginning and you remembered the time. You 
completed watching the movie and started watching another one. Now, in 
the middle of this movie you thought of watching that action scene in 
the previous movie. So, you stopped playing the current one and started 
the previous one and forwarded to exactly 22 minutes and started 
watching it, till the end.
</p>
<p>
In the above analogy, every movie is like a context, you are watching 
the movie means you are executing the context. When you remember the 
time 22:00, it is like calling a getcontext function which stores the 
value 22 in say 't'. You completed watching the movie meaning the 
current context finished its execution. You started watching the 2nd one
 and would like to watch that action scene. This stopping of the 2nd 
movie and going to 22 minutes of the first one is done by setcontext, 
which takes the argument as 't'. The 2nd context execution has ended and
 first one is restored.
</p>
<p>
I hope you have got a clear idea about these functions. <code>:)</code>
</p>   
<p>
I have been saying 'function associated with a context'. This means that
 every context should have a function to execute, otherwise there is no 
purpose of using a context! This attaching a function to a context can 
be done by using the following function call:
</p>
<div><div id="highlighter_156289" class="syntaxhighlighter  c"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="c keyword bold">void</code> <code class="c plain">makecontext(ucontext_t *ucp, </code><code class="c keyword bold">void</code> <code class="c plain">(*func)(), </code><code class="c color1 bold">int</code> <code class="c plain">argc, ...);</code></div></div></td></tr></tbody></table></div></div>
<p>
The arguments are the pointer to the context to which you want to attach
 a function, the pointer to the function, the third argument is the 
number of arguments you want to pass to the function. If you specify 
'n', then 'n' arguments should follow after this number.
</p>
<p>
So, suppose you want to set the context for currently executing context 
to some other context, but at the same time you don't want to loose the 
the current executing context, that is you want to store it in another 
context variable. This can be done simply by calling <u>getcontext()</u> followed by <u>setcontext()</u> or there is another way which is equivalent to above operation. It is by calling the following function:
</p>
<div><div id="highlighter_102804" class="syntaxhighlighter  c"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="c color1 bold">int</code> <code class="c plain">swapcontext(ucontext_t *restrict oucp, </code><code class="c keyword bold">const</code> <code class="c plain">ucontext_t *restrict ucp);</code></div></div></td></tr></tbody></table></div></div>
<p>When the above function is called it stores the current context into <i>oucp</i> and transfers the control to the context pointed to by <i>ucp</i>. Thus, it avoids the overhead of calling two functions.
</p>
<hr>
<p>
Now that we have known about all these functions, let us try to write a 
small program which demonstrates the usage of the above functions. The 
program is as follows:
</p>     
<div><div id="highlighter_965321" class="syntaxhighlighter  c"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="c preprocessor">#include&lt;stdio.h&gt;</code></div><div class="line number2 index1 alt1"><code class="c preprocessor">#include&lt;stdlib.h&gt;</code></div><div class="line number3 index2 alt2"><code class="c preprocessor">#include&lt;ucontext.h&gt;</code></div><div class="line number4 index3 alt1"><code class="c preprocessor">#define MEM 64000</code></div><div class="line number5 index4 alt2"><code class="c plain">ucontext_t T1, T2,Main;</code></div><div class="line number6 index5 alt1"><code class="c plain">ucontext_t a;</code></div><div class="line number7 index6 alt2"><code class="c color1 bold">int</code> <code class="c plain">fn1()</code></div><div class="line number8 index7 alt1"><code class="c plain">{</code></div><div class="line number9 index8 alt2"><code class="c spaces">&nbsp;</code><code class="c functions bold">printf</code><code class="c plain">(</code><code class="c string">"this is from 1\n"</code><code class="c plain">);</code></div><div class="line number10 index9 alt1"><code class="c spaces">&nbsp;</code><code class="c plain">setcontext(&amp;Main);</code></div><div class="line number11 index10 alt2"><code class="c plain">}</code></div><div class="line number12 index11 alt1"><code class="c keyword bold">void</code> <code class="c plain">fn2()</code></div><div class="line number13 index12 alt2"><code class="c plain">{</code></div><div class="line number14 index13 alt1"><code class="c spaces">&nbsp;</code><code class="c functions bold">printf</code><code class="c plain">(</code><code class="c string">"this is from 2\n"</code><code class="c plain">);</code></div><div class="line number15 index14 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">setcontext( &amp;a);</code></div><div class="line number16 index15 alt1"><code class="c spaces">&nbsp;</code><code class="c functions bold">printf</code><code class="c plain">(</code><code class="c string">"finished 1\n"</code><code class="c plain">);</code></div><div class="line number17 index16 alt2"><code class="c plain">}</code></div><div class="line number18 index17 alt1"><code class="c keyword bold">void</code> <code class="c plain">start()</code></div><div class="line number19 index18 alt2"><code class="c plain">{</code></div><div class="line number20 index19 alt1"><code class="c spaces">&nbsp;</code><code class="c plain">getcontext(&amp;a);</code></div><div class="line number21 index20 alt2"><code class="c spaces">&nbsp;</code><code class="c plain">a.uc_link=0;</code></div><div class="line number22 index21 alt1"><code class="c spaces">&nbsp;</code><code class="c plain">a.uc_stack.ss_sp=</code><code class="c functions bold">malloc</code><code class="c plain">(MEM);</code></div><div class="line number23 index22 alt2"><code class="c spaces">&nbsp;</code><code class="c plain">a.uc_stack.ss_size=MEM;</code></div><div class="line number24 index23 alt1"><code class="c spaces">&nbsp;</code><code class="c plain">a.uc_stack.ss_flags=0;</code></div><div class="line number25 index24 alt2"><code class="c spaces">&nbsp;</code><code class="c plain">makecontext(&amp;a, (</code><code class="c keyword bold">void</code><code class="c plain">*)&amp;fn1, 0);</code></div><div class="line number26 index25 alt1"><code class="c plain">}</code></div><div class="line number27 index26 alt2">&nbsp;</div><div class="line number28 index27 alt1"><code class="c color1 bold">int</code> <code class="c plain">main(</code><code class="c color1 bold">int</code> <code class="c plain">argc, </code><code class="c color1 bold">char</code> <code class="c plain">*argv[])</code></div><div class="line number29 index28 alt2"><code class="c plain">{</code></div><div class="line number30 index29 alt1"><code class="c spaces">&nbsp;</code><code class="c plain">start();</code></div><div class="line number31 index30 alt2"><code class="c spaces">&nbsp;</code><code class="c plain">getcontext(&amp;Main);</code></div><div class="line number32 index31 alt1"><code class="c spaces">&nbsp;</code><code class="c plain">getcontext(&amp;T1);</code></div><div class="line number33 index32 alt2"><code class="c spaces">&nbsp;</code><code class="c plain">T1.uc_link=0;</code></div><div class="line number34 index33 alt1"><code class="c spaces">&nbsp;</code><code class="c plain">T1.uc_stack.ss_sp=</code><code class="c functions bold">malloc</code><code class="c plain">(MEM);</code></div><div class="line number35 index34 alt2"><code class="c spaces">&nbsp;</code><code class="c plain">T1.uc_stack.ss_size=MEM;</code></div><div class="line number36 index35 alt1"><code class="c spaces">&nbsp;</code><code class="c plain">T1.uc_stack.ss_flags=0;</code></div><div class="line number37 index36 alt2"><code class="c spaces">&nbsp;</code><code class="c plain">makecontext(&amp;T1, (</code><code class="c keyword bold">void</code><code class="c plain">*)&amp;fn1, 0);</code></div><div class="line number38 index37 alt1"><code class="c spaces">&nbsp;</code><code class="c plain">swapcontext(&amp;Main, &amp;T1);</code></div><div class="line number39 index38 alt2"><code class="c spaces">&nbsp;</code><code class="c plain">getcontext(&amp;T2);</code></div><div class="line number40 index39 alt1"><code class="c spaces">&nbsp;</code><code class="c plain">T2.uc_link=0;</code></div><div class="line number41 index40 alt2"><code class="c spaces">&nbsp;</code><code class="c plain">T2.uc_stack.ss_sp=</code><code class="c functions bold">malloc</code><code class="c plain">(MEM);</code></div><div class="line number42 index41 alt1"><code class="c spaces">&nbsp;</code><code class="c plain">T2.uc_stack.ss_size=MEM;</code></div><div class="line number43 index42 alt2"><code class="c spaces">&nbsp;</code><code class="c plain">T2.uc_stack.ss_flags=0;</code></div><div class="line number44 index43 alt1"><code class="c spaces">&nbsp;</code><code class="c plain">makecontext(&amp;T2, (</code><code class="c keyword bold">void</code><code class="c plain">*)&amp;fn2, 0);</code></div><div class="line number45 index44 alt2"><code class="c spaces">&nbsp;</code><code class="c plain">swapcontext(&amp;Main, &amp;T2);</code></div><div class="line number46 index45 alt1"><code class="c spaces">&nbsp;</code><code class="c functions bold">printf</code><code class="c plain">(</code><code class="c string">"completed\n"</code><code class="c plain">);</code></div><div class="line number47 index46 alt2"><code class="c spaces">&nbsp;</code><code class="c functions bold">exit</code><code class="c plain">(0);</code></div><div class="line number48 index47 alt1"><code class="c plain">}</code></div></div></td></tr></tbody></table></div></div>

<p>
Although the code looks messy, it will be clear if we can trace out the 
exact execution path. Start with the main(). Here, we are calling the 
function <i>start()</i>. It initializes the context of <b>a</b> and attaches the function <i>fn1</i> to it, by making the call to <i>makecontext</i>. Take a careful look at the allocation of memory to the stack and other assignments. 
</p>
<p>
The control transfers back to <i>main()</i>, where we are initializing the context variable <i>T1</i>.Here we are attaching the function <i>fn1</i> to <i>T1</i>. Then we are calling <i>swapcontext</i>, in which we are storing the current context of the main function in <i>Main</i> and transferring the control to <i>fn1</i>. 
</p>
<p>The function <i>fn1</i> starts executing and displays the string in it. Then we are setting the context to <i>Main</i>
 again. Now, the previous state of the main function gets restored and 
execution of main function starts from that point, which is after 
swapcontext function.
</p>
<p>
Here, again we initialize the context of <i>T2</i> and attach the function <i>fn2</i> to it. We then swap the context with <i>Main</i> again. The function <i>fn2</i> starts executing and displays the string inside it. The second statement makes the current context set to the context variable <i>a</i> and hence the function <i>fn1</i>
 which was attached previously gets executed, which in turn calls the 
main function context and this completes its execution by printing 
'completed'.
</p>
<p>
One thing worth noting here is that the statement 'finished 1' is not 
printed at all. The reason is that the set context is called which 
transfers the control to the function <i>fn1</i> and thus not executing this statement.
</p>
<p>Hence, the output of the program is as follows:
</p>

<div><div id="highlighter_271819" class="syntaxhighlighter  c"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="c keyword bold">this</code> <code class="c plain">is from 1</code></div><div class="line number2 index1 alt1"><code class="c keyword bold">this</code> <code class="c plain">is from 2</code></div><div class="line number3 index2 alt2"><code class="c keyword bold">this</code> <code class="c plain">is from 1</code></div><div class="line number4 index3 alt1"><code class="c plain">completed</code></div></div></td></tr></tbody></table></div></div>

<hr>
<p>
Now that we are clear about these contexts and their switchings let us 
move on to the next phase. Since we are using Round-Robin scheduling, 
there must be a function that should execute after every time interval. 
This function should do all the necessary context switching and 
restoring. But how to make this happen? You may think of a busy while 
loop... But remember here we are not executing multiple threads like a 
pthread library, but only single thread of execution in which we change 
and restore the contexts continuously mimicing execution of several 
threads.
</p>
<p>
<b><i>Signals</i></b> come handy in these situations. Now, this is again
 a new thing which we are gonna discuss. Although, you have unknowingly 
sent many signals to many processes by using <i>kill</i> command, or pressing <code>Ctrl + C</code> which sends Interrupt signal SIGINT to a process, which merely stops the process.
</p>
<h2>Delving into signals:</h2>
<p>
So, we can send any process any signal (of course, we should have the 
necessary permissions for doing that). Every process has a signal 
handler associated with it for each signal. Signal handlers are just 
like normal functions but are executed only when the process receives a 
signal that corresponds to the function.
</p>
<p>
Although most of them are default, we can give our own functions to 
execute for each signal. The default job of a process when it receives <code>SIGTERM</code> is to terminate. Now, let us try to change this behaviour by writing a program as follows:
</p>
<div><div id="highlighter_708634" class="syntaxhighlighter  c"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="c preprocessor">#include&lt;stdio.h&gt;</code></div><div class="line number2 index1 alt1"><code class="c preprocessor">#include&lt;stdlib.h&gt;</code></div><div class="line number3 index2 alt2"><code class="c preprocessor">#include&lt;signal.h&gt;</code></div><div class="line number4 index3 alt1"><code class="c preprocessor">#include&lt;sys/types.h&gt;</code></div><div class="line number5 index4 alt2"><code class="c keyword bold">void</code> <code class="c plain">print(</code><code class="c color1 bold">int</code> <code class="c plain">y)</code></div><div class="line number6 index5 alt1"><code class="c plain">{</code></div><div class="line number7 index6 alt2"><code class="c spaces">&nbsp;</code><code class="c functions bold">printf</code><code class="c plain">(</code><code class="c string">"you can't kill me :D\n"</code><code class="c plain">);</code></div><div class="line number8 index7 alt1"><code class="c plain">}</code></div><div class="line number9 index8 alt2"><code class="c color1 bold">int</code> <code class="c plain">main(</code><code class="c color1 bold">int</code> <code class="c plain">argc, </code><code class="c color1 bold">char</code> <code class="c plain">*argv[])</code></div><div class="line number10 index9 alt1"><code class="c plain">{</code></div><div class="line number11 index10 alt2"><code class="c spaces">&nbsp;</code>&nbsp;</div><div class="line number12 index11 alt1"><code class="c spaces">&nbsp;</code><code class="c keyword bold">struct</code> <code class="c plain">sigaction act, oact;</code></div><div class="line number13 index12 alt2"><code class="c spaces">&nbsp;</code><code class="c plain">act.sa_handler = print;</code></div><div class="line number14 index13 alt1"><code class="c spaces">&nbsp;</code><code class="c plain">sigemptyset(&amp;act.sa_mask);</code></div><div class="line number15 index14 alt2"><code class="c spaces">&nbsp;</code><code class="c plain">act.sa_flags = 0;</code></div><div class="line number16 index15 alt1"><code class="c spaces">&nbsp;</code><code class="c plain">sigaction(SIGINT, &amp;act, NULL);</code></div><div class="line number17 index16 alt2"><code class="c spaces">&nbsp;</code><code class="c keyword bold">while</code><code class="c plain">(1);</code></div><div class="line number18 index17 alt1"><code class="c spaces">&nbsp;</code><code class="c functions bold">printf</code><code class="c plain">(</code><code class="c string">"yea2"</code><code class="c plain">);</code></div><div class="line number19 index18 alt2"><code class="c spaces">&nbsp;</code><code class="c functions bold">exit</code><code class="c plain">(0);</code></div><div class="line number20 index19 alt1"><code class="c plain">}</code></div></div></td></tr></tbody></table></div></div>

<p>
There are some new terms in this program, but let us see the interesting
 part first. When you execute this program, it does nothing but keeps on
 executing an infinite while loop. Now, you try to <code>Ctrl+C</code> it. By default, it should terminate. But that doesn't happen here. We have created a signal handler for it, which is <i>print</i>.
</p>
<p>
so, when you press <code>Ctrl +C </code>, you end up displaying the same
 message 'you can't kill me :D'. So, now you may think that you creted a
 simple virus program which simply wastes the CPU cycles. But that's not
 true. Not all signals can be assigned a signal handler. One of them is <code>SIGKILL</code>. 
</p>
<p>
To kill this process, either you can close the terminal or simply open a new one and issue the following command:
</p>
<div><div id="highlighter_331007" class="syntaxhighlighter  c"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="c plain">kill -9 process-id</code></div></div></td></tr></tbody></table></div></div>
<p>
This command directly kills the process.
</p>
<p>
Now, coming to the code of the program. We see a new datatype called <code>sigaction</code>. The structure of this datatype is as follows:
</p>
<div><div id="highlighter_724299" class="syntaxhighlighter  c"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="c keyword bold">struct</code> <code class="c plain">sigaction {</code></div><div class="line number2 index1 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c keyword bold">void</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="c plain">(*sa_handler)(</code><code class="c color1 bold">int</code><code class="c plain">);</code></div><div class="line number3 index2 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c keyword bold">void</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="c plain">(*sa_sigaction)(</code><code class="c color1 bold">int</code><code class="c plain">, siginfo_t *, </code><code class="c keyword bold">void</code> <code class="c plain">*);</code></div><div class="line number4 index3 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">sigset_t&nbsp;&nbsp; sa_mask;</code></div><div class="line number5 index4 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c color1 bold">int</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="c plain">sa_flags;</code></div><div class="line number6 index5 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c keyword bold">void</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="c plain">(*sa_restorer)(</code><code class="c keyword bold">void</code><code class="c plain">);</code></div><div class="line number7 index6 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">};</code></div></div></td></tr></tbody></table></div></div>
<p>
As you compare the program with this structure, we see that <i>sa_handler</i>
 is a function pointer that points to the actual signal handler. The 
second one is not needed for now. It is like an alternate signal 
handler. The third argument is worth explaining now. It is of type <i>sigset_t</i> and it is internally definition depends on the hardware implementation.
</p>
<p>The <i>sa_mask</i> stores the information about the signals whether 
they are blocked or not. Different signals can be added or removed by 
using the following functions:
</p>
<div><div id="highlighter_832165" class="syntaxhighlighter  c"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="c color1 bold">int</code> <code class="c plain">sigemptyset (sigset_t *set);</code></div><div class="line number2 index1 alt1"><code class="c color1 bold">int</code> <code class="c plain">sigfillset (sigset_t *set);</code></div><div class="line number3 index2 alt2"><code class="c color1 bold">int</code> <code class="c plain">sigaddset (sigset_t *set, </code><code class="c color1 bold">int</code> <code class="c plain">signum);&nbsp; </code></div><div class="line number4 index3 alt1"><code class="c color1 bold">int</code> <code class="c plain">sigdelset (sigset_t *set, </code><code class="c color1 bold">int</code> <code class="c plain">signum);</code></div><div class="line number5 index4 alt2"><code class="c color1 bold">int</code> <code class="c plain">sigismember (</code><code class="c keyword bold">const</code> <code class="c plain">sigset_t *set, </code><code class="c color1 bold">int</code> <code class="c plain">signum);</code></div></div></td></tr></tbody></table></div></div>
<p>
The usage of these functions is simple. The first one excludes all the 
signals from blocking. The second one is opposite to the previous one. 
The third one adds a signal specified by <i>signum</i> to the set. Fourth one removes the signal. Fifth one checks if the signal specified by <i>signum</i> is already blocked or not.
</p>

<p>If the <i>sa_mask</i> is filled with appropriate signals, then they 
will get blocked when the signal handler is executing. In the above 
program we didn't block any of the signals. But, for instance if you 
want to block signal number 11, then you need to add this to the <i>sa_mask</i>,
 which will give you the desired result. Also note that the signal which
 triggered this handler is implicitly blocked when the handler is 
executing.
</p>
<p>
Lastly, the <i>sigaction</i> function takes three arguments. The first 
is the signal name for which you want to create a signal handler, second
 is the pointer to a sigaction datatype, third is also the same but, 
when you give a pointer to sigaction rather than NULL, then the variable
 is filled with the previous sigaction variable. For now, you can keep 
it as NULL.
</p><p>
The <i>sig_num</i> that I was saying can be referred from <a href="http://en.wikipedia.org/wiki/Unix_signal">here</a>.
</p>
<hr>
<p>
Now we have a function that executes on receiving a particular signal. 
But we don't want to manually give a signal to the process all the time,
 but instead we want that to be done automatically as well as 
periodically. 
</p>
<p>
Here comes the <b>itimerval</b> into the picture. First let us see a small program using this, to see what actually happens with this <i>itimerval</i>.
</p>
<div><div id="highlighter_452086" class="syntaxhighlighter  c"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="c preprocessor">#include &lt;stdio.h&gt;</code></div><div class="line number2 index1 alt1"><code class="c preprocessor">#include &lt;signal.h&gt;</code></div><div class="line number3 index2 alt2"><code class="c preprocessor">#include &lt;sys/time.h&gt;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="c color1 bold">int</code> <code class="c plain">count = 0;</code></div><div class="line number6 index5 alt1"><code class="c keyword bold">void</code> <code class="c plain">sighandler(</code><code class="c color1 bold">int</code> <code class="c plain">sig)</code></div><div class="line number7 index6 alt2"><code class="c plain">{</code></div><div class="line number8 index7 alt1"><code class="c spaces">&nbsp;</code>&nbsp;</div><div class="line number9 index8 alt2"><code class="c spaces">&nbsp;</code><code class="c functions bold">printf</code><code class="c plain">(</code><code class="c string">"signal occurred %d times\n"</code><code class="c plain">,signo, ++count);</code></div><div class="line number10 index9 alt1"><code class="c plain">}</code></div><div class="line number11 index10 alt2"><code class="c spaces">&nbsp;</code>&nbsp;</div><div class="line number12 index11 alt1"><code class="c color1 bold">int</code> <code class="c plain">main(</code><code class="c keyword bold">void</code><code class="c plain">)</code></div><div class="line number13 index12 alt2"><code class="c plain">{</code></div><div class="line number14 index13 alt1"><code class="c spaces">&nbsp;</code><code class="c keyword bold">struct</code> <code class="c plain">itimerval it;</code></div><div class="line number15 index14 alt2"><code class="c spaces">&nbsp;</code><code class="c keyword bold">struct</code> <code class="c plain">sigaction act, oact;</code></div><div class="line number16 index15 alt1"><code class="c spaces">&nbsp;</code><code class="c plain">act.sa_handler = sighandler;</code></div><div class="line number17 index16 alt2"><code class="c spaces">&nbsp;</code><code class="c plain">sigemptyset(&amp;act.sa_mask);</code></div><div class="line number18 index17 alt1"><code class="c spaces">&nbsp;</code><code class="c plain">act.sa_flags = 0;</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="c spaces">&nbsp;</code><code class="c plain">sigaction(SIGPROF, &amp;act, &amp;oact); </code></div><div class="line number21 index20 alt2"><code class="c spaces">&nbsp;</code><code class="c comments">// Start itimer</code></div><div class="line number22 index21 alt1"><code class="c spaces">&nbsp;</code><code class="c plain">it.it_interval.tv_sec = 4;</code></div><div class="line number23 index22 alt2"><code class="c spaces">&nbsp;</code><code class="c plain">it.it_interval.tv_usec = 50000;</code></div><div class="line number24 index23 alt1"><code class="c spaces">&nbsp;</code><code class="c plain">it.it_value.tv_sec = 1;</code></div><div class="line number25 index24 alt2"><code class="c spaces">&nbsp;</code><code class="c plain">it.it_value.tv_usec = 100000;</code></div><div class="line number26 index25 alt1"><code class="c spaces">&nbsp;</code><code class="c plain">setitimer(ITIMER_PROF, &amp;it, NULL);</code></div><div class="line number27 index26 alt2"><code class="c spaces">&nbsp;</code><code class="c keyword bold">for</code> <code class="c plain">( ; ; ) ;</code></div><div class="line number28 index27 alt1"><code class="c plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>
If you try to execute the above code, you will see the string 'signal occured .. tiimes' for the first time after (1 + 100000*10<sup>-6</sup>) or 1.1 seconds. Then from the second time you will see the string after every (4 + 50000*10<sup>-6</sup>)
 or 4.05 seconds and it goes on. I think by now you may understand what 
these numbers mean. So, I don't want to further go deep into the <i>struct itimerval</i>, but recommend you to see the man pages.
</p>
<p>
Now, observing the code it is clear that <i>itimerval</i> is a datatype for starting an alarm. The signal handler responds for <i>SIGPROF</i> signal, which is generated only if the <i>setitimer()</i> is set for <i>ITIMER_PROF</i>.
</p>
<p>
In other words, when you want to count the time, there may be different 
cases. It may be either the direct time, which can be done by giving 
first argument as <i>ITIMER_REAL</i> and the signal handler should be changed <i>SIGALRM</i> signal.
</p>
<p>
We may only want to count the time for which the process executed in the
 user mode. This can be done by passing ITIMER_VIRTUAL and the signal 
this generates is <i>SIGVTALRM</i>.
</p>
<p>
You may also want to count the amount of time a process spent in both 
user mode and kernel mode. Then you need to change the arguments as <i>ITIMER_PROF</i> and signal it generates <i>SIFPROF</i> which is shown in the above program.
</p>
<p>
Note that the difference between first and third types is that first 
type counts the time the process spent in ready queue and all other 
extra times, while the third type doesn't consider these times.
</p>
<hr>
<h3>The main part:</h3>
<p>
We are ready with every function necessary to build a thread library. 
So, let us discuss the basic idea of building it. So, we define an <i>ready_queue</i>, which stores all the pointers to the contexts of live threads like a linked list, <i>task_count</i>, that counts the number of alive threads, Initializing function, that initializes the signal handler for <i>SIGPROF</i> (here, I use third way of counting the time), set all the values for the alarm.
</p>
<p>
A <i>task_create</i> function that creates a context and attaches it 
with a function that was passed as argument to task_create and adds it 
into the ready_queue.
</p>
<p>
When the first task is created, the timer is set to start, and the signal handler function will be <i>schedule</i> which chooses one context from the ready_queue and it either sets or swaps with the current context. 
</p>
<p>
There should also be a separate variable for storing the context of the 
main function, because we should note that the main function will also 
be scheduled just like the other tasks.
</p>
<hr>
<p>
There is one more issue that we forgot to deal which is as follows:
The user created a new task and the create_task function was executing, 
in which the addition of the new task's context into the queue is going 
on. Now, imagine what happens when a SIGPROF is received? The control 
straight away transfers to the <i>schedule</i> function, but the queue was in middle of the pointer operations, and so this many lead to <i>segmentation error</i>.
</p>
<p>
Guess what should be done to overcome this problem? The answer will be 
updated after some time. For now, you think of implementing the library 
and discover your own solution to overcome the above issue. I have got 
these <i>SIGSEGV</i>s for about hundred times until I finally got the correct result.
</p> 
<p>
Although, I was giving a quick glance over all the functions, I hope 
this will suffice. But, if you have any doubts still crept in, please do
 comment on this post <code>:)</code>.
</p>
 





 

<br></div>
<div style="clear: both;"></div>
</div>
<div class="post-footer">
<div class="post-footer-line post-footer-line-1"><span class="post-author vcard">
Posted by
<span class="fn">
<a href="https://plus.google.com/109788692632472947635" itemprop="author" rel="author" title="author profile">
Nitish Dadannagari
</a>
</span>
</span>
<span class="post-timestamp">
at
<a class="timestamp-link" href="http://nitish712.blogspot.com/2012/10/thread-library-using-context-switching.html" itemprop="url" rel="bookmark" title="permanent link"><abbr class="published" itemprop="datePublished" title="2012-10-02T11:05:00-07:00">11:05</abbr></a>
</span>
<span class="post-comment-link">
</span>
<span class="post-icons">
<span class="item-control blog-admin pid-93352202">
<a href="http://www.blogger.com/post-edit.g?blogID=3430663956764748632&amp;postID=5071293246739300471&amp;from=pencil" title="Edit Post">
<img alt="" class="icon-action" src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/icon18_edit_allbkg.gif" height="18" width="18">
</a>
</span>
</span>
<div class="post-share-buttons goog-inline-block">
<a class="goog-inline-block share-button sb-email" href="http://www.blogger.com/share-post.g?blogID=3430663956764748632&amp;postID=5071293246739300471&amp;target=email" target="_blank" title="Email This"><span class="share-button-link-text">Email This</span></a><a class="goog-inline-block share-button sb-blog" href="http://www.blogger.com/share-post.g?blogID=3430663956764748632&amp;postID=5071293246739300471&amp;target=blog" onclick='window.open(this.href, "_blank", "height=270,width=475"); return false;' target="_blank" title="BlogThis!"><span class="share-button-link-text">BlogThis!</span></a><a class="goog-inline-block share-button sb-twitter" href="http://www.blogger.com/share-post.g?blogID=3430663956764748632&amp;postID=5071293246739300471&amp;target=twitter" target="_blank" title="Share to Twitter"><span class="share-button-link-text">Share to Twitter</span></a><a class="goog-inline-block share-button sb-facebook" href="http://www.blogger.com/share-post.g?blogID=3430663956764748632&amp;postID=5071293246739300471&amp;target=facebook" onclick='window.open(this.href, "_blank", "height=430,width=640"); return false;' target="_blank" title="Share to Facebook"><span class="share-button-link-text">Share to Facebook</span></a><div class="goog-inline-block dummy-container"><div id="___plusone_0" style="text-indent: 0px; margin: 0px; padding: 0px; background: none repeat scroll 0% 0% transparent; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 300px; height: 20px;"><iframe title="+1" data-gapiattached="true" src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/fastbutton.html" name="I0_1391131619737" id="I0_1391131619737" vspace="0" tabindex="0" style="position: static; top: 0px; width: 300px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" marginwidth="0" marginheight="0" hspace="0" frameborder="0" scrolling="no" width="100%"></iframe></div></div>
</div>
</div>
<div class="post-footer-line post-footer-line-2"><span class="post-labels">
Labels:
<a href="http://nitish712.blogspot.com/search/label/itimer" rel="tag">itimer</a>,
<a href="http://nitish712.blogspot.com/search/label/sigaction" rel="tag">sigaction</a>,
<a href="http://nitish712.blogspot.com/search/label/ucontext_t" rel="tag">ucontext_t</a>
</span>
</div>
<div class="post-footer-line post-footer-line-3"><span class="post-location">
</span>
</div>
</div>
</div>
<div class="comments" id="comments">
<a name="comments"></a>
<h4>No comments:</h4>
<div id="Blog1_comments-block-wrapper">
<dl class="avatar-comment-indent" id="comments-block">
</dl>
</div>
<p class="comment-footer">
</p><div class="comment-form">
<a name="comment-form"></a>
<h4 id="comment-post-message">Post a Comment</h4>
<p>
</p>
<a href="https://www.blogger.com/comment-iframe.g?blogID=3430663956764748632&amp;postID=5071293246739300471&amp;blogspotRpcToken=2945196" id="comment-editor-src"></a>
<iframe allowtransparency="true" class="blogger-iframe-colorize blogger-comment-from-post" id="comment-editor" name="comment-editor" src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/comment-iframe.html" frameborder="0" height="267px" width="100%"></iframe>
<script type="text/javascript" src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/3121195295-comment_from_post_iframe.js"></script>
<script type="text/javascript">
      BLOG_CMT_createIframe('https://www.blogger.com/rpc_relay.html', '02846782781614636449');
    </script>
</div>
<p></p>
<div id="backlinks-container">
<div id="Blog1_backlinks-container">
</div>
</div>
</div>
</div>

        </div></div>
      
<!-- google_ad_section_end -->
</div>
<div class="blog-pager" id="blog-pager">
<span id="blog-pager-newer-link">
<a class="blog-pager-newer-link" href="http://nitish712.blogspot.com/2012/10/in-my-previous-post-i-was-explaining.html" id="Blog1_blog-pager-newer-link" title="Newer Post">Newer Post</a>
</span>
<span id="blog-pager-older-link">
<a class="blog-pager-older-link" href="http://nitish712.blogspot.com/2012/09/classical-ipc-problems.html" id="Blog1_blog-pager-older-link" title="Older Post">Older Post</a>
</span>
<a class="home-link" href="http://nitish712.blogspot.com/">Home</a>
</div>
<div class="clear"></div>
<div class="post-feeds">
<div class="feed-links">
Subscribe to:
<a class="feed-link" href="http://nitish712.blogspot.com/feeds/5071293246739300471/comments/default" target="_blank" type="application/atom+xml">Post Comments (Atom)</a>
</div>
</div>
<script type="text/javascript">window.___gcfg = {'lang': 'en_GB'};</script>
</div></div>
</div>
</div>
<div class="column-left-outer">
<div class="column-left-inner">
<aside>
</aside>
</div>
</div>
<div class="column-right-outer">
<div class="column-right-inner">
<aside>
<div class="sidebar section" id="sidebar-right-1"><div class="widget Stats" id="Stats1">
<h2>Views</h2>
<div class="widget-content">
<div id="Stats1_content" style="">
<img src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/chart.png" alt="Sparkline" id="Stats1_sparkline" height="30" width="75">
<span class="counter-wrapper graph-counter-wrapper" id="Stats1_totalCount"><span class="digit stage-0"><strong>1</strong><span class="blind-plate"></span></span><span class="digit stage-0"><strong>6</strong><span class="blind-plate"></span></span><span class="digit stage-0"><strong>3</strong><span class="blind-plate"></span></span><span class="digit stage-0"><strong>4</strong><span class="blind-plate"></span></span><span class="digit stage-0"><strong>1</strong><span class="blind-plate"></span></span></span>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=3430663956764748632&amp;widgetType=Stats&amp;widgetId=Stats1&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick='return _WidgetManager._PopupConfig(document.getElementById("Stats1"));' target="configStats1" title="Edit">
<img alt="" src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/icon18_wrench_allbkg.png" height="18" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div>
</div>
</div><div class="widget BlogArchive" id="BlogArchive1">
<h2>Blog Archive</h2>
<div class="widget-content">
<div id="ArchiveList">
<div id="BlogArchive1_ArchiveList">
<ul class="hierarchy">
<li class="archivedate expanded">
<a class="toggle" href="javascript:void(0)">
<span class="zippy toggle-open">▼&nbsp;</span>
</a>
<a class="post-count-link" href="http://nitish712.blogspot.com/search?updated-min=2012-01-01T00:00:00-08:00&amp;updated-max=2013-01-01T00:00:00-08:00&amp;max-results=14">2012</a>
<span class="post-count" dir="ltr">(14)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

          ►&nbsp;
        
</span>
</a>
<a class="post-count-link" href="http://nitish712.blogspot.com/2012_08_01_archive.html">August</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

          ►&nbsp;
        
</span>
</a>
<a class="post-count-link" href="http://nitish712.blogspot.com/2012_09_01_archive.html">September</a>
<span class="post-count" dir="ltr">(4)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate expanded">
<a class="toggle" href="javascript:void(0)">
<span class="zippy toggle-open">▼&nbsp;</span>
</a>
<a class="post-count-link" href="http://nitish712.blogspot.com/2012_10_01_archive.html">October</a>
<span class="post-count" dir="ltr">(5)</span>
<ul class="posts">
<li><a href="http://nitish712.blogspot.com/2012/10/thread-library-using-context-switching.html">Creating your own Thread Library using Context Swi...</a></li>
<li><a href="http://nitish712.blogspot.com/2012/10/in-my-previous-post-i-was-explaining.html">Pseudo-Code for thread library</a></li>
<li><a href="http://nitish712.blogspot.com/2012/10/virtual-memory-i.html">Virtual Memory-I</a></li>
<li><a href="http://nitish712.blogspot.com/2012/10/virtual-memory-ii.html">Virtual Memory-II</a></li>
<li><a href="http://nitish712.blogspot.com/2012/10/important-system-calls.html">Important System calls</a></li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

          ►&nbsp;
        
</span>
</a>
<a class="post-count-link" href="http://nitish712.blogspot.com/2012_11_01_archive.html">November</a>
<span class="post-count" dir="ltr">(4)</span>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=3430663956764748632&amp;widgetType=BlogArchive&amp;widgetId=BlogArchive1&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick='return _WidgetManager._PopupConfig(document.getElementById("BlogArchive1"));' target="configBlogArchive1" title="Edit">
<img alt="" src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/icon18_wrench_allbkg.png" height="18" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div>
</div><div class="widget Profile" id="Profile1">
<h2>Myself</h2>
<div class="widget-content">
<a href="https://plus.google.com/109788692632472947635"><img alt="My Photo" class="profile-img" src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/photo.jpg" height="80" width="80"></a>
<dl class="profile-datablock">
<dt class="profile-data">
<a data-gapiattached="true" data-onload="true" data-gapiscan="true" class="profile-name-link g-profile" href="https://plus.google.com/109788692632472947635" rel="author" style="background-image: url(//www.google.com/images/icons/ui/gprofile_button-16.png);">
Nitish Dadannagari
</a>
<br>
<div id="___follow_0" style="text-indent: 0px; margin: 0px; padding: 0px; background: none repeat scroll 0% 0% transparent; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 117px; height: 20px;"><iframe data-gapiattached="true" src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/follow.html" name="I1_1391131619744" id="I1_1391131619744" vspace="0" tabindex="0" style="position: static; top: 0px; width: 117px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" marginwidth="0" marginheight="0" hspace="0" frameborder="0" scrolling="no" width="100%"></iframe></div>
</dt>
</dl>
<a class="profile-link" href="https://plus.google.com/109788692632472947635" rel="author">View my complete profile</a>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=3430663956764748632&amp;widgetType=Profile&amp;widgetId=Profile1&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick='return _WidgetManager._PopupConfig(document.getElementById("Profile1"));' target="configProfile1" title="Edit">
<img alt="" src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/icon18_wrench_allbkg.png" height="18" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div>
</div></div>
</aside>
</div>
</div>
</div>
<div style="clear: both"></div>
<!-- columns -->
</div>
<!-- main -->
</div>
</div>
<div class="main-cap-bottom cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
<footer>
<div class="footer-outer">
<div class="footer-cap-top cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left footer-fauxborder-left">
<div class="fauxborder-right footer-fauxborder-right"></div>
<div class="region-inner footer-inner">
<div class="foot section" id="footer-1"></div>
<table class="section-columns columns-2" border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td class="first columns-cell">
<div class="foot section" id="footer-2-1"></div>
</td>
<td class="columns-cell">
<div class="foot section" id="footer-2-2"></div>
</td>
</tr>
</tbody>
</table>
<!-- outside of the include in order to lock Attribution widget -->
<div class="foot section" id="footer-3"><div class="widget Attribution" id="Attribution1">
<div class="widget-content" style="text-align: center;">
Template images by <a href="http://www.istockphoto.com/googleimages.php?id=11394138&amp;platform=blogger&amp;langregion=en_GB" target="_blank">luoman</a>. Powered by <a href="http://www.blogger.com/" target="_blank">Blogger</a>.
</div>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=3430663956764748632&amp;widgetType=Attribution&amp;widgetId=Attribution1&amp;action=editWidget&amp;sectionId=footer-3" onclick='return _WidgetManager._PopupConfig(document.getElementById("Attribution1"));' target="configAttribution1" title="Edit">
<img alt="" src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/icon18_wrench_allbkg.png" height="18" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div></div>
</div>
</div>
<div class="footer-cap-bottom cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
</footer>
<!-- content -->
</div>
</div>
<div class="content-cap-bottom cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
</div>
<script type="text/javascript">
    window.setTimeout(function() {
        document.body.className = document.body.className.replace('loading', '');
      }, 10);
  </script>
<script type="text/javascript">
if (window.jstiming) window.jstiming.load.tick('widgetJsBefore');
</script><script type="text/javascript" src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/2221937197-widgets.js"></script>
<script gapi_processed="true" type="text/javascript" src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/plusone.js"></script><iframe style="width: 1px; height: 1px; position: absolute; top: -100px;" src="Thinking%20of%20Processes:%20Creating%20your%20own%20Thread%20Library%20using%20Context%20Switching_files/postmessageRelay.html" id="oauth2relay973474626" name="oauth2relay973474626"></iframe>
<script type="text/javascript">
if (typeof(BLOG_attachCsiOnload) != 'undefined' && BLOG_attachCsiOnload != null) { window['blogger_templates_experiment_id'] = "templatesV2";window['blogger_blog_id'] = '3430663956764748632';BLOG_attachCsiOnload('item_'); }_WidgetManager._Init('//www.blogger.com/rearrange?blogID\x3d3430663956764748632','//nitish712.blogspot.com/2012/10/thread-library-using-context-switching.html','3430663956764748632');
_WidgetManager._SetDataContext([{'name': 'blog', 'data': {'blogId': '3430663956764748632', 'bloggerUrl': 'http://www.blogger.com', 'title': 'Thinking of Processes', 'pageType': 'item', 'url': 'http://nitish712.blogspot.com/2012/10/thread-library-using-context-switching.html', 'canonicalUrl': 'http://nitish712.blogspot.com/2012/10/thread-library-using-context-switching.html', 'canonicalHomepageUrl': 'http://nitish712.blogspot.com/', 'homepageUrl': 'http://nitish712.blogspot.com/', 'blogspotFaviconUrl': 'http://nitish712.blogspot.com/favicon.ico', 'enabledCommentProfileImages': true, 'adultContent': false, 'disableAdSenseWidget': false, 'analyticsAccountNumber': '', 'searchLabel': '', 'searchQuery': '', 'pageName': 'Creating your own Thread Library using \74i\76\74u\76Context Switching\74/u\76\74/i\076', 'pageTitle': 'Thinking of Processes: Creating your own Thread Library using Context Switching', 'metaDescription': '', 'encoding': 'UTF-8', 'locale': 'en_GB', 'localeUnderscoreDelimited': 'en_gb', 'isPrivate': false, 'isMobile': false, 'isMobileRequest': false, 'mobileClass': '', 'isPrivateBlog': false, 'languageDirection': 'ltr', 'feedLinks': '\74link rel\75\42alternate\42 type\75\42application/atom+xml\42 title\75\42Thinking of Processes - Atom\42 href\75\42http://nitish712.blogspot.com/feeds/posts/default\42 /\76\n\74link rel\75\42alternate\42 type\75\42application/rss+xml\42 title\75\42Thinking of Processes - RSS\42 href\75\42http://nitish712.blogspot.com/feeds/posts/default?alt\75rss\42 /\76\n\74link rel\75\42service.post\42 type\75\42application/atom+xml\42 title\75\42Thinking of Processes - Atom\42 href\75\42http://www.blogger.com/feeds/3430663956764748632/posts/default\42 /\76\n\n\74link rel\75\42alternate\42 type\75\42application/atom+xml\42 title\75\42Thinking of Processes - Atom\42 href\75\42http://nitish712.blogspot.com/feeds/5071293246739300471/comments/default\42 /\76\n', 'meTag': '', 'openIdOpTag': '', 'imageSrcTag': '', 'latencyHeadScript': '\74script type\75\42text/javascript\42\76(function() { var b\75window,f\75\42chrome\42,g\75\42jstiming\42,k\75\42tick\42;(function(){function d(a){this.t\75{};this.tick\75function(a,d,c){var e\75void 0!\75c?c:(new Date).getTime();this.t[a]\75[e,d];if(void 0\75\75c)try{b.console.timeStamp(\42CSI/\42+a)}catch(h){}};this[k](\42start\42,null,a)}var a;b.performance\46\46(a\75b.performance.timing);var n\75a?new d(a.responseStart):new d;b.jstiming\75{Timer:d,load:n};if(a){var c\75a.navigationStart,h\75a.responseStart;0\74c\46\46h\76\75c\46\46(b[g].srt\75h-c)}if(a){var e\75b[g].load;0\74c\46\46h\76\75c\46\46(e[k](\42_wtsrt\42,void 0,c),e[k](\42wtsrt_\42,\42_wtsrt\42,h),e[k](\42tbsd_\42,\42wtsrt_\42))}try{a\75null,\nb[f]\46\46b[f].csi\46\46(a\75Math.floor(b[f].csi().pageT),e\46\0460\74c\46\46(e[k](\42_tbnd\42,void 0,b[f].csi().startE),e[k](\42tbnd_\42,\42_tbnd\42,c))),null\75\75a\46\46b.gtbExternal\46\46(a\75b.gtbExternal.pageT()),null\75\75a\46\46b.external\46\46(a\75b.external.pageT,e\46\0460\74c\46\46(e[k](\42_tbnd\42,void 0,b.external.startE),e[k](\42tbnd_\42,\42_tbnd\42,c))),a\46\46(b[g].pt\75a)}catch(p){}})();b.tickAboveFold\75function(d){var a\0750;if(d.offsetParent){do a+\75d.offsetTop;while(d\75d.offsetParent)}d\75a;750\76\75d\46\46b[g].load[k](\42aft\42)};var l\75!1;function m(){l||(l\75!0,b[g].load[k](\42firstScrollTime\42))}b.addEventListener?b.addEventListener(\42scroll\42,m,!1):b.attachEvent(\42onscroll\42,m);\n })();\74/script\076', 'mobileHeadScript': '', 'ieCssRetrofitLinks': '\74!--[if IE]\76\74script type\75\42text/javascript\42 src\75\42https://www.blogger.com/static/v1/jsbin/850967532-ieretrofit.js\42\76\74/script\76\n\74![endif]--\076', 'view': '', 'dynamicViewsCommentsSrc': '//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js', 'dynamicViewsScriptSrc': '//www.blogblog.com/dynamicviews/d6f37bb30c327165', 'plusOneApiSrc': 'https://apis.google.com/js/plusone.js', 'testHtml5CssSrc': 'https://www.blogger.com/static/v1/widgets/3640646893-css_bundle_html5.css', 'sf': 'n', 'tf': ''}}, {'name': 'skin', 'data': {'vars': {'content_padding': '10px', 'paging_background': 'transparent none no-repeat scroll top center', 'image_border_small_size': '2px', 'body_background_gradient_cap': 'none', 'tabs_selected_background_color': '#fff9ee', 'body_rule_color': '#8e3e3e', 'header_shadow_spread': '3px', 'header_shadow_offset_left': '1px', 'header_padding': '30px', 'link_visited_color': '#888888', 'mobile_background_size': 'auto', 'post_title_font': 'normal normal 24px Georgia, Utopia, \47Palatino Linotype\47, Palatino, serif', 'tabs_text_color': '#998877', 'date_header_margin': 'inherit', 'header_background_gradient': 'url(//www.blogblog.com/1kt/simple/gradients_light.png)', 'content_shadow_spread_webkit': '5px', 'header_bottom_border_size': '0', 'header_shadow_offset_top': '2px', 'mobile_button_color': '#ffffff', 'widget_title_font': 'normal bold 12px Georgia, Utopia, \47Palatino Linotype\47, Palatino, serif', 'main_section_margin': '15px', 'body_background': '#513831 url(//themes.googleusercontent.com/image?id\0751KH22PlFqsiVYxboQNAoJjYmRbw5M4REHmdJbHT5M2x9zVMGrCqwSjZvaQW_A10KPc6Il) repeat scroll top center /* Credit: luoman (http://www.istockphoto.com/googleimages.php?id\07511394138\46amp;platform\75blogger) */', 'keycolor': '#ccb666', 'content_shadow_spread': '40px', 'image_background_color': '#ffffff', 'header_font': 'normal normal 48px Vollkorn', 'header_background_color': '#ccb666', 'main_border_width': '0', 'main_padding': '15px', 'tabs_border_color': '#ffffff', 'image_text_color': '#79642a', 'description_text_size': '140%', 'post_footer_background_color': '#eee9dd', 'body_background_gradient_tile': 'none', 'page_width': 'auto', 'tabs_background_gradient': 'none', 'mobile_background_overlay': 'transparent none repeat scroll top left', 'main_padding_bottom': '30px', 'tabs_background_color': '#fff9ee', 'image_border_large_size': '5px', 'post_margin_bottom': '25px', 'body_background_override': '', 'tabs_margin_side': '30px', 'link_hover_color': '#ff1800', 'description_text_color': '#ffffff', 'body_text_color': '#79642a', 'content_padding_horizontal': '10px', 'endSide': 'right', 'page_width_selector': '.region-inner', 'date_header_padding': 'inherit', 'post_footer_text_color': '#666555', 'startSide': 'left', 'date_header_color': '#c75656', 'tabs_font': 'normal normal 16px Georgia, Utopia, \47Palatino Linotype\47, Palatino, serif', 'post_footer_border_color': '#eeeeee', 'body_font': 'normal normal 14px Georgia, Utopia, \47Palatino Linotype\47, Palatino, serif', 'footer_bevel': '0', 'tabs_bevel_border_width': '1px', 'date_header_background_color': '#f8e9be', 'content_shadow_spread_ie': '10px', 'widget_title_text_color': '#429ff2', 'header_border_horizontalsize': '0', 'image_border_color': '#eeeeee', 'tabs_border_width': '1px', 'content_background_color': '#fff9ee', 'link_color': '#993200', 'header_text_color': '#cef8be', 'date_header_letterspacing': 'inherit', 'tabs_margin_top': '0', 'main_padding_top': '30px', 'header_border_size': '0', 'tabs_selected_text_color': '#000000', 'content_background_color_selector': '.content-inner', 'body_background_color': '#513831', 'widget_alternate_text_color': '#a33636'}, 'override': '.label-size-1 {\nfont-size:100%;\nopacity:1.0\n}\n.label-size-2 {\nfont-size:110%;\nopacity:1.0\n}\n.label-size-3 {\nfont-size:120%;\n}\n.label-size-4 {\nfont-size:140%;\n}\n.label-size-5 {\nfont-size:180%;\nopacity:1.0;\n}\n/* General features in the tag cloud */\n.cloud-label-widget-content {\ntext-align:justify;\nbackground-color:#E8E8E8 ;\nborder:1px dotted #993200;\nborder-radius:8px;\npadding:10px 20px 20px 10px;\n}\n.syntaxhighlighter table td.gutter .line {\n  text-align: right !important;\n  padding: 0 5px  !important;\n}'}}, {'name': 'view', 'data': {'classic': {'name': 'classic', 'url': '/?view\75classic'}, 'flipcard': {'name': 'flipcard', 'url': '/?view\75flipcard'}, 'magazine': {'name': 'magazine', 'url': '/?view\75magazine'}, 'mosaic': {'name': 'mosaic', 'url': '/?view\75mosaic'}, 'sidebar': {'name': 'sidebar', 'url': '/?view\75sidebar'}, 'snapshot': {'name': 'snapshot', 'url': '/?view\75snapshot'}, 'timeslide': {'name': 'timeslide', 'url': '/?view\75timeslide'}}}]);
_WidgetManager._RegisterWidget('_LabelView', new _WidgetInfo('Label1', 'crosscol', null, document.getElementById('Label1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_StatsView', new _WidgetInfo('Stats1', 'sidebar-right-1', null, document.getElementById('Stats1'), {'title': 'Views', 'showGraphicalCounter': true, 'showAnimatedCounter': true, 'showSparkline': true, 'statsUrl': '//nitish712.blogspot.com/b/stats?style\75BLACK_TRANSPARENT\46timeRange\75ALL_TIME\46token\75J1-f50MBAAA.ODlsv_qaWA2RgAT3P71S5lzIqNRbonxV9EAasdSDv9M.ceqMByOGqh-JQNIToms7yA'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogArchiveView', new _WidgetInfo('BlogArchive1', 'sidebar-right-1', null, document.getElementById('BlogArchive1'), {'languageDirection': 'ltr'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_ProfileView', new _WidgetInfo('Profile1', 'sidebar-right-1', null, document.getElementById('Profile1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_AttributionView', new _WidgetInfo('Attribution1', 'footer-3', null, document.getElementById('Attribution1'), {'attribution': 'Template images by \74a href\75\47http://www.istockphoto.com/googleimages.php?id\07511394138\46amp;platform\75blogger\46langregion\75en_GB\47 target\75\47_blank\47\76luoman\74/a\76. Powered by \74a href\75\47http://www.blogger.com\47 target\75\47_blank\47\76Blogger\74/a\76.'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HeaderView', new _WidgetInfo('Header1', 'header', null, document.getElementById('Header1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_NavbarView', new _WidgetInfo('Navbar1', 'navbar', null, document.getElementById('Navbar1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogView', new _WidgetInfo('Blog1', 'main', null, document.getElementById('Blog1'), {'cmtInteractionsEnabled': false, 'lightboxEnabled': true, 'lightboxModuleUrl': 'https://www.blogger.com/static/v1/jsbin/2115967362-lbx__en_gb.js', 'lightboxCssUrl': 'https://www.blogger.com/static/v1/v-css/4138445517-lightbox_bundle.css'}, 'displayModeFull'));
</script>

</body></html>